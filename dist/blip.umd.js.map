{"version":3,"file":"blip.umd.js","sources":["../tmp/context.js","../tmp/guid.js","../tmp/blip-node-collection.js","../tmp/blip-node.js","../tmp/destination.js","../tmp/sample-library.js","../tmp/clip-factory.js","../tmp/chain-factory.js","../tmp/loop-factory.js","../tmp/load-samples.js","../tmp/time.js","../tmp/random.js","../tmp/chance.js","../tmp/blip.js"],"sourcesContent":["var ctx = new AudioContext();\nexport default ctx;\n","/**\n * Generates a GUID string.\n * @returns {String} The generated GUID.\n * @example af8a8416-6e18-a307-bd9c-f2c947bbb3aa\n * @author Slavik Meltser (slavik@meltser.info).\n * @link http://slavik.meltser.info/?p=142\n */\nfunction guid() {\n    function _p8(s) {\n        var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n        return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n    }\n    return _p8() + _p8(true) + _p8(true) + _p8();\n}\nexport default guid;\n","function BlipNodeCollection(nodes) {\n    this.nodes = nodes || [];\n}\nBlipNodeCollection.prototype = {\n    count: function () {\n        return this.nodes.length;\n    },\n    each: function (f) {\n        for (var i = 0; i < this.nodes.length; i++) {\n            f.call(this, this.nodes[i], i, this.nodes);\n        }\n    },\n    contains: function (node) {\n        for (var i = 0; i < this.nodes.length; i++) {\n            if (this.nodes[i] === node)\n                return true;\n        }\n        return false;\n    },\n    add: function (node) {\n        if (this.nodes.indexOf(node) === -1)\n            this.nodes.push(node);\n    },\n    remove: function (node) {\n        var index = this.nodes.indexOf(node);\n        if (index !== -1)\n            this.nodes.splice(index, 1);\n    },\n    removeAll: function () {\n        this.nodes = [];\n    }\n};\nexport default BlipNodeCollection;\n","import ctx from './context';\nimport guid from './guid';\nimport BlipNodeCollection from './blip-node-collection';\n// the associated functions will be used by the `createNode` function within `blip.node`\nvar NODE_TYPES = {\n    'gain': ctx.createGain,\n    'delay': ctx.createDelay,\n    'panner': ctx.createPanner,\n    'convolver': ctx.createConvolver,\n    'analyser': ctx.createAnalyser,\n    'channelSplitter': ctx.createChannelSplitter,\n    'channelMerger': ctx.createChannelMerger,\n    'dynamicsCompressor': ctx.createDynamicsCompressor,\n    'biquadFilter': ctx.createBiquadFilter,\n    'waveShaper': ctx.createWaveShaper,\n    'oscillator': ctx.createOscillator,\n    'periodicWave': ctx.createPeriodicWave,\n    'bufferSource': ctx.createBufferSource,\n    'audioBufferSource': ctx.createBufferSource,\n};\nfunction BlipNode() {\n    this.inputs = new BlipNodeCollection();\n    this.outputs = new BlipNodeCollection();\n    return this;\n}\n;\nBlipNode.prototype.connect = function (blipnode) {\n    if (this.node().numberOfOutputs > 0 && blipnode.node().numberOfInputs > 0) {\n        this.node().connect(blipnode.node());\n        this.outputs.add(blipnode);\n        blipnode.inputs.add(this);\n    }\n    return this;\n};\nBlipNode.prototype.disconnect = function (blipnode) {\n    // disconnect all\n    this.node().disconnect();\n    var me = this;\n    if (blipnode) {\n        this.outputs.remove(blipnode);\n        blipnode.inputs.remove(this);\n        // reconnect to remaining outputs\n        this.outputs.each(function (n) { this.connect(n); });\n    }\n    else {\n        this.outputs.each(function (n) {\n            n.inputs.remove(me);\n        });\n        this.outputs.removeAll();\n    }\n    return this;\n};\nBlipNode.prototype.prop = function (name, value) {\n    if (arguments.length < 2) {\n        if (typeof name === 'object') {\n            for (var p in name) {\n                this.node()[p] = name[p];\n            }\n            return this;\n        }\n        else {\n            return this.node()[name];\n        }\n    }\n    this.node()[name] = value;\n    return this;\n};\nBlipNode.prototype.param = function (name, f) {\n    if (arguments.length < 2)\n        return this.node()[name];\n    if (typeof f !== 'function') {\n        this.node()[name].value = f;\n    }\n    else {\n        f.call(this.node()[name]);\n    }\n    return this;\n};\nBlipNode.prototype.start = function (t) {\n    this.node().start.call(this.node(), t);\n};\nBlipNode.prototype.stop = function (t) {\n    this.node().stop.call(this.node(), t);\n};\nBlipNode.prototype.node = function () {\n    return this.node();\n};\nBlipNode.prototype.toString = function () {\n    return '[object BlipNode]';\n};\nBlipNode.prototype.valueOf = function () {\n    return this.id();\n};\nBlipNode.prototype.call = function (methodName) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var node = this.node();\n    if (typeof node[methodName] !== 'function')\n        return;\n    node[methodName].apply(node, args);\n};\n// wrap an existing AudioNode as a BlipNode\nBlipNode.fromAudioNode = function (ref) {\n    var node = new BlipNode();\n    var id = guid();\n    node.node = function () { return ref; };\n    node.id = function () { return id; };\n    return node;\n};\nBlipNode.create = function (type) {\n    var restParams = Array.prototype.slice.call(arguments, 1);\n    var ref = createNode(type);\n    var id = guid();\n    var node = new BlipNode();\n    function createNode(t) {\n        return NODE_TYPES[t].apply(ctx, restParams);\n    }\n    node.node = function () { return ref; };\n    node.id = function () { return id; };\n    return node;\n};\nexport default BlipNode;\n","import ctx from './context';\nimport BlipNode from './blip-node';\nvar destination = BlipNode.fromAudioNode(ctx.destination);\nexport default destination;\n","var _samples = {};\nvar sampleLibrary = {};\nsampleLibrary.get = function (name) {\n    return _samples[name];\n};\nsampleLibrary.set = function (name, sample) {\n    _samples[name] = sample;\n};\nsampleLibrary.list = function () {\n    return Object.keys(_samples);\n};\nexport default sampleLibrary;\n","import ctx from './context';\nimport destination from './destination';\nimport BlipNode from './blip-node';\nimport sampleLibrary from './sample-library';\nvar clipFactory = function () {\n    var sample, rate = 1, gain = 1;\n    var chain = null;\n    var outputGain = BlipNode.create('gain').connect(destination);\n    var clip = {};\n    clip.sample = function (name) {\n        if (!arguments.length)\n            return sample;\n        sample = sampleLibrary.get(name);\n        return clip;\n    };\n    clip.rate = function (number) {\n        if (!arguments.length)\n            return rate;\n        rate = number;\n        return clip;\n    };\n    clip.gain = function (number) {\n        if (!arguments.length)\n            return gain;\n        gain = number;\n        outputGain.param('gain', gain);\n        return clip;\n    };\n    clip.chain = function (c) {\n        if (!arguments.length)\n            return chain;\n        chain = c;\n        outputGain.disconnect(destination);\n        chain.from(outputGain).to(destination);\n        return clip;\n    };\n    clip.play = function (time, sourceAccessor) {\n        time = time || 0;\n        var source = ctx.createBufferSource();\n        source.buffer = sample;\n        source.playbackRate.value = clip.rate();\n        if (typeof sourceAccessor === 'function') {\n            sourceAccessor.call(clip, source);\n        }\n        source.connect(outputGain.node());\n        source.start(time);\n    };\n    return clip;\n};\nexport default clipFactory;\n","var chainFactory = function (nodes) {\n    nodes = nodes || [];\n    wire();\n    function wire() {\n        for (var i = 0; i < nodes.length - 1; i++) {\n            nodes[i].connect(nodes[i + 1]);\n        }\n    }\n    var chain = {};\n    chain.node = function (blipnode) {\n        nodes.push(blipnode);\n        wire();\n        return chain;\n    };\n    chain.start = function () {\n        var a = nodes.slice(0, 1);\n        return a.length ? a[0] : null;\n    };\n    chain.end = function () {\n        var a = nodes.slice(-1);\n        return a.length ? a[0] : null;\n    };\n    chain.from = function (blipnode) {\n        blipnode.connect(chain.start());\n        return chain;\n    };\n    chain.to = function (blipnode) {\n        chain.end().connect(blipnode);\n        return chain;\n    };\n    chain.wire = function () {\n        wire();\n        return chain;\n    };\n    return chain;\n};\nexport default chainFactory;\n","import ctx from './context';\nvar loopFactory = function () {\n    var lookahead = 25.0, // ms\n    scheduleAheadTime = 0.1; // s\n    var tempo; // ticks per minute\n    var tickInterval; // seconds per tick\n    var data = [];\n    var currentTick = 0, nextTickTime = 0;\n    var tick = function (t, d, i) { };\n    var each = function (t, i) { };\n    var iterations = 0, limit = 0;\n    var timer;\n    var loop = {};\n    function nextTick() {\n        nextTickTime += tickInterval;\n        // cycle through ticks\n        if (++currentTick >= data.length) {\n            currentTick = 0;\n            iterations += 1;\n        }\n    }\n    function scheduleTick(tickNum, time) {\n        tick.call(loop, time, data[tickNum], tickNum);\n    }\n    function scheduleIteration(iterationNum, time) {\n        each.call(loop, time, iterationNum);\n    }\n    function scheduler() {\n        while (nextTickTime < ctx.currentTime + scheduleAheadTime) {\n            scheduleTick(currentTick, nextTickTime);\n            if (currentTick === 0) {\n                scheduleIteration(iterations, nextTickTime);\n            }\n            nextTick();\n            if (limit && iterations >= limit) {\n                loop.reset();\n                return;\n            }\n        }\n        timer = window.setTimeout(scheduler, lookahead);\n    }\n    loop.tempo = function (bpm) {\n        if (!arguments.length)\n            return tempo;\n        tempo = bpm;\n        tickInterval = 60 / tempo;\n        return loop;\n    };\n    loop.tickInterval = function (s) {\n        if (!arguments.length)\n            return tickInterval;\n        tickInterval = s;\n        tempo = 60 / tickInterval;\n        return loop;\n    };\n    loop.data = function (a) {\n        if (!arguments.length)\n            return data;\n        data = a;\n        return loop;\n    };\n    loop.lookahead = function (ms) {\n        if (!arguments.length)\n            return lookahead;\n        lookahead = ms;\n        return loop;\n    };\n    loop.scheduleAheadTime = function (s) {\n        if (!arguments.length)\n            return scheduleAheadTime;\n        scheduleAheadTime = s;\n        return loop;\n    };\n    loop.limit = function (n) {\n        if (!arguments.length)\n            return limit;\n        limit = n;\n        return loop;\n    };\n    loop.tick = function (f) {\n        if (!arguments.length)\n            return tick;\n        tick = f;\n        return loop;\n    };\n    loop.each = function (f) {\n        if (!arguments.length)\n            return each;\n        each = f;\n        return loop;\n    };\n    loop.start = function (t) {\n        nextTickTime = t || ctx.currentTime;\n        scheduler();\n        return loop;\n    };\n    loop.stop = function () {\n        window.clearTimeout(timer);\n        return loop;\n    };\n    loop.reset = function () {\n        currentTick = 0;\n        iterations = 0;\n        return loop;\n    };\n    return loop;\n};\nexport default loopFactory;\n","import ctx from './context';\nimport sampleLibrary from './sample-library';\n// `samples` is a mapping of names to URLs\n//   eg. { kick: 'path/to/kick.wav' }\nvar loadSamples = function (samples) {\n    var sampleNames = Object.keys(samples);\n    // map sample names to promises for decoded audio buffers\n    var bufferPromises = sampleNames.map(function (name) {\n        var sampleUrl = samples[name];\n        return new Promise(function (resolve, reject) {\n            fetch(sampleUrl, {\n                method: 'GET'\n            }).then(function (response) {\n                return response.arrayBuffer();\n            }, reject).then(function (arrayBuffer) {\n                ctx.decodeAudioData(arrayBuffer, function (audioBuffer) {\n                    resolve(audioBuffer);\n                }, reject);\n            }, reject);\n        });\n    });\n    return Promise.all(bufferPromises).then(function (buffers) {\n        sampleNames.map(function (name, index) {\n            sampleLibrary.set(name, buffers[index]);\n        });\n    });\n};\nexport default loadSamples;\n","import ctx from './context';\nfunction getContextCurrentTime() { return ctx.currentTime; }\nvar time = {};\ntime.now = getContextCurrentTime;\ntime.in = function (offsetSeconds) {\n    return getContextCurrentTime() + offsetSeconds;\n};\n// identity, kinda useless\ntime.seconds = function (t) { return t; };\ntime.ms = function (seconds) {\n    return seconds / 1000;\n};\ntime.samp = function (samples) {\n    return samples / ctx.sampleRate;\n};\nexport default time;\n","var random = function (a, b) {\n    switch (arguments.length) {\n        case 0:\n            return Math.random();\n        case 1:\n            return Math.random() * a;\n        case 2:\n            return Math.random() * (b - a) + a;\n    }\n};\nexport default random;\n","var chance = function (p) {\n    var attempt = Math.random();\n    return attempt < p;\n};\nexport default chance;\n","import ctx from './context';\nimport destination from './destination';\nimport BlipNode from './blip-node';\nimport clipFactory from './clip-factory';\nimport chainFactory from './chain-factory';\nimport loopFactory from './loop-factory';\nimport sampleLibrary from './sample-library';\nimport loadSamples from './load-samples';\nimport time from './time';\nimport random from './random';\nimport chance from './chance';\n// public api\nvar blip = {};\nblip.version = '0.4.0';\nblip.time = time;\nblip.random = random;\nblip.chance = chance;\nblip.node = BlipNode.create;\nblip.clip = clipFactory;\nblip.chain = chainFactory;\nblip.loop = loopFactory;\nblip.destination = destination;\nblip.listener = BlipNode.fromAudioNode(ctx.listener);\nblip.getContext = function () { return ctx; };\nblip.loadSamples = loadSamples;\nblip.sampleLibrary = sampleLibrary;\nexport default blip;\n"],"names":[],"mappings":"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"}